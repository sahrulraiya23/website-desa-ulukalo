<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Pemerintahan – Aparat Desa & Kepala Dusun | Desa Ulukalo</title>
  <meta name="description" content="Daftar Aparat Pemerintah Desa Ulukalo dan Kepala Dusun dilengkapi foto dan jabatan.">
  <meta name="keywords" content="Desa Ulukalo, Aparat Desa, Kepala Dusun, Pemerintahan, Kolaka">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&family=Poppins:wght@300;400;500;600;700;800;900&family=Raleway:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <style>
    /* Sentuhan kecil biar kartu rapi */
    .aparat-card img { aspect-ratio: 4/3; object-fit: cover; }
    .aparat-card .jabatan { font-size: .925rem; color: #6c757d; }
    .aparat-card .dusun   { font-size: .85rem; color: #6c757d; }
    .filter-wrap .form-control, .filter-wrap .form-select { height: 48px; }
    .empty-state { border: 1px dashed #ced4da; border-radius: 12px; padding: 24px; color:#6c757d; }
  </style>
</head>

<body class="about-page">
  <!-- ======= Header ======= -->
  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center">
        <!-- <img src="assets/img/logo-ulukalo.png" alt="Logo Desa Ulukalo"> -->
        <i class="bi bi-bank"></i>
        <h1 class="sitename">Desa Ulukalo</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html">Beranda</a></li>

          <li class="dropdown">
            <a href="sejarah.html"><span>Profil</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="sejarah.html">Sejarah Desa</a></li>
              <li><a href="visi-misi.html">Visi &amp; Misi</a></li>
              <li><a href="struktur-desa.html">Struktur Desa</a></li>
            </ul>
          </li>

          <li class="dropdown">
            <a href="pemerintahan.html" class="active"><span>Pemerintahan</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="pemerintahan.html" class="active">Aparat Desa &amp; Kepala Dusun</a></li>
            </ul>
          </li>

          <li><a href="apbdes.html">APBDes</a></li>
          <li><a href="layanan-surat.html">Layanan Surat</a></li>
          <li><a href="kontak.html">Kontak</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

    </div>
  </header>
  <!-- End Header -->

  <main class="main">

    <!-- ======= Page Title ======= -->
    <div class="page-title">
      <div class="heading">
        <div class="container">
          <div class="row d-flex justify-content-center text-center">
            <div class="col-lg-8">
              <h1 class="heading-title">Aparat Desa & Kepala Dusun</h1>
              <p class="mb-0">
                Daftar perangkat Desa Ulukalo beserta Kepala Dusun. Gunakan kolom cari atau filter dusun
                untuk menemukan profil yang diinginkan.
              </p>
            </div>
          </div>
        </div>
      </div>
      <nav class="breadcrumbs">
        <div class="container">
          <ol>
            <li><a href="index.html">Beranda</a></li>
            <li class="current">Pemerintahan</li>
          </ol>
        </div>
      </nav>
    </div>
    <!-- End Page Title -->

    <!-- ======= Daftar Aparat ======= -->
    <section id="aparat" class="section">
      <div class="container">

        <!-- Filter & Search -->
        <div class="filter-wrap row g-3 align-items-center mb-4">
          <div class="col-md-6">
            <div class="input-group">
              <span class="input-group-text bg-white"><i class="bi bi-search"></i></span>
              <input id="q" type="text" class="form-control" placeholder="Cari nama atau jabatan…">
            </div>
          </div>
          <div class="col-md-3">
            <select id="dusunSelect" class="form-select">
              <option value="">Semua Dusun</option>
              <!-- opsi dusun akan diisi via JS -->
            </select>
          </div>
          <div class="col-md-3 text-md-end">
            <a href="struktur-desa.html" class="btn btn-outline-dark"><i class="bi bi-diagram-3 me-1"></i> Lihat Struktur Desa</a>
          </div>
        </div>

        <!-- Grid kartu -->
        <div id="aparatGrid" class="row g-4">
          <!-- kartu akan dirender oleh JS -->
        </div>

        <!-- Empty state -->
        <div id="emptyState" class="empty-state text-center mt-4 d-none">
          <i class="bi bi-search fs-3 d-block mb-2"></i>
          <div>Tidak ada data yang cocok. Coba ubah kata kunci atau filter dusun.</div>
        </div>

      </div>
    </section>
    <!-- End Daftar Aparat -->

  </main>

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer-16 footer position-relative dark-background">
    <div class="container">
      <div class="footer-main">
        <div class="row align-items-start">

          <div class="col-lg-6">
            <div class="brand-section">
              <a href="index.html" class="logo d-flex align-items-center mb-3">
                <span class="sitename">Desa Ulukalo</span>
              </a>
              <p class="brand-description">
                Kantor Desa Ulukalo, Kabupaten Kolaka, Sulawesi Tenggara. Informasi resmi profil,
                pemerintahan, layanan surat, serta transparansi APBDes.
              </p>

              <div class="contact-info mt-4">
                <div class="contact-item">
                  <i class="bi bi-geo-alt"></i>
                  <span>Alamat kantor: [isi alamat lengkap]</span>
                </div>
                <div class="contact-item">
                  <i class="bi bi-telephone"></i>
                  <span>Telp/WA: [isi nomor]</span>
                </div>
                <div class="contact-item">
                  <i class="bi bi-envelope"></i>
                  <span>Email: [isi email]</span>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="row">
              <div class="col-6">
                <h6>Profil</h6>
                <nav class="footer-nav">
                  <a href="sejarah.html">Sejarah</a>
                  <a href="visi-misi.html">Visi &amp; Misi</a>
                  <a href="struktur-desa.html">Struktur Desa</a>
                </nav>
              </div>
              <div class="col-6">
                <h6>Layanan</h6>
                <nav class="footer-nav">
                  <a href="pemerintahan.html">Aparat &amp; Kadus</a>
                  <a href="apbdes.html">APBDes</a>
                  <a href="layanan-surat.html">Layanan Surat</a>
                  <a href="kontak.html">Kontak</a>
                </nav>
              </div>
            </div>
          </div>

        </div>
      </div>

      <div class="footer-bottom mt-4">
        <div class="bottom-content d-flex flex-wrap justify-content-between align-items-center">
          <div class="copyright">
            <p>© <span class="sitename">Desa Ulukalo</span> — Semua hak dilindungi.</p>
          </div>
          <div class="legal-links">
            <a href="kebijakan-privasi.html">Kebijakan Privasi</a>
            <a href="syarat-penggunaan.html">Syarat Penggunaan</a>
          </div>
        </div>
      </div>

    </div>
  </footer>
  <!-- End Footer -->

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- Render Aparat -->
  <script>
    const GRID = document.getElementById('aparatGrid');
    const Q = document.getElementById('q');
    const DUSUN = document.getElementById('dusunSelect');
    const EMPTY = document.getElementById('emptyState');

    let DATA = [];

    function norm(s) { return (s || '').toString().toLowerCase(); }

    function uniqueDusun(list) {
      const set = new Set();
      list.forEach(x => { if (x.dusun && x.dusun.trim() !== '') set.add(x.dusun); });
      return Array.from(set).sort((a,b) => a.localeCompare(b));
    }

    function cardTemplate(item) {
      const foto = item.foto || 'assets/img/aparat/placeholder.jpg';
      const alt = `Foto ${item.nama || 'Aparat Desa'}`;
      const dusun = item.dusun && item.dusun !== '-' ? ` • ${item.dusun}` : '';
      return `
        <div class="col-12 col-sm-6 col-lg-4">
          <div class="card aparat-card h-100 border-0 shadow-sm">
            <img src="${foto}" alt="${alt}" class="card-img-top" loading="lazy"
                 onerror="this.onerror=null;this.src='assets/img/aparat/placeholder.jpg';">
            <div class="card-body">
              <h5 class="card-title mb-1">${item.nama || '-'}</h5>
              <div class="jabatan">${item.jabatan || '-'}</div>
              <div class="dusun">${item.dusun || '-'}</div>
            </div>
          </div>
        </div>`;
    }

    function render() {
      const q = norm(Q.value);
      const fDusun = DUSUN.value;

      const filtered = DATA.filter(x => {
        const hitQ = !q || norm(x.nama).includes(q) || norm(x.jabatan).includes(q);
        const hitD = !fDusun || (x.dusun === fDusun);
        return hitQ && hitD;
      });

      GRID.innerHTML = filtered.map(cardTemplate).join('');
      EMPTY.classList.toggle('d-none', filtered.length > 0);
    }

    // Init
    fetch('assets/js/aparat.json')
      .then(r => r.json())
      .then(json => {
        DATA = Array.isArray(json) ? json : [];
        // Isi opsi dusun
        const dusunList = uniqueDusun(DATA);
        DUSUN.innerHTML = '<option value="">Semua Dusun</option>' + dusunList.map(d => `<option value="${d}">${d}</option>`).join('');
        render();
      })
      .catch(() => {
        DATA = [];
        render();
      });

    Q.addEventListener('input', render);
    DUSUN.addEventListener('change', render);
  </script>
</body>
</html>
